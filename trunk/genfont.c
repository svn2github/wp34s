/* This file is part of 34S.
 * 
 * 34S is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * 34S is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with 34S.  If not, see <http://www.gnu.org/licenses/>.
 */

/* Generate the bitmapped fonts */

#include <stdio.h>
#include <stdlib.h>
#include "licence.h"


static struct s_charset {
	unsigned int octal;
	int width;
	int bitrows[6];
	const char *name;
	int sortas;
	int unicode;
	int windows;
	const char *uname;
} charset[512] = {
/*	  octal width	bitmap by row from left	    name	     sort Unicode Windows Unicode name*/
	{ 0000,  1,   {  0,  0,  0,  0,  0,  0 },  NULL,               0, 0x0000, 0x00 			},
	{ 0001,  4,   {  7,  0,  5,  2,  2,  5 },  "x-bar",         7500, 0xe001, 0x01 			},
	{ 0002,  5,   { 15,  0,  9, 10,  4,  3 },  "y-bar",         7900, 0x0233, 0x02 			},
	{ 0003,  6,   { 28,  4,  4,  5,  6,  4 },  "sqrt",         17100, 0x221a, 0x03 			},
	{ 0004,  6,   {  8, 20,  4,  4,  5,  2 },  "integral",     17200, 0x222b, 0x04 			},
	{ 0005,  4,   {  7,  5,  7,  0,  0,  0 },  "degree",        1000, 0x00b0, 0xb0 			},
	{ 0006,  1,   {  0,  0,  0,  0,  0,  0 },  "narrow-space",     0, 0xe000, 0xa0 			},
	{ 0007,  6,   {  0, 14,  1, 13,  9, 14 },  "grad",         18000, 0xe002, 0x07 			},
	{ 0010,  6,   {  0,  4, 31,  4,  0, 31 },  "+/-",	   12700, 0x00b1, 0xb1, "plus-minus" 	},
	{ 0011,  5,   {  8,  4,  2, 15,  0, 15 },  "<=",	   15600, 0x2264, 0xab, "le" 		},
	{ 0012,  5,   {  1,  2,  4, 15,  0, 15 },  ">=",	   16000, 0x2265, 0xbb, "ge" 		},
	{ 0013,  6,   {  0,  8, 31,  4, 31,  2 },  "!=",	   15900, 0x2260, 0x87, "ne" 		},
	{ 0014,  6,   { 28,  2, 14,  7,  2, 28 },  "euro",	   16400, 0x20ac, 0x80 			},
	{ 0015,  6,   {  0,  4,  8, 31,  8,  4 },  "->",	   14600, 0x2192, 0x05, "right"  	},
	{ 0016,  6,   {  0,  4,  2, 31,  2,  4 },  "<-",	   14700, 0x2190, 0x06, "left"   	},
	{ 0017,  6,   {  0,  4,  4, 21, 14,  4 },  "v",	 	   14900, 0x2193, 0x0f, "down"  	},
	{ 0020,  6,   {  0,  4, 14, 21,  4,  4 },  "^",	           14800, 0x2191, 0x10, "up"     	},
	{ 0021,  5,   { 12,  2,  7,  2,  2,  0 },  "f-shift",        100, 0xe003, 0x11 			},
	{ 0022,  5,   { 14,  9, 14,  8,  7,  0 },  "g-shift",        200, 0xe004, 0x12 			},
	{ 0023,  5,   {  1,  1,  7,  9,  9,  0 },  "h-shift",        300, 0xe005, 0x13 			},		 
	{ 0024,  3,   {  3,  1,  3,  0,  0,  0 },  "cmplx",         2700, 0xe006, 0x14 			},		 
	{ 0025,  6,   { 30, 25, 21, 21, 19, 15 },  "O-slash",       5800, 0x00d8, 0xd8 			},		 
	{ 0026,  5,   {  0,  0, 14, 13, 11,  7 },  "o-slash",       5800, 0x00f8, 0xf8 			},		 
	{ 0027,  6,   {  2, 31,  2,  8, 31,  8 },  "<->",	   15200, 0x21c6, 0x17, "exchange" 	},
	{ 0030,  5,   {  6,  9,  7,  9, 15,  1 },  "sz",            6400, 0x00df, 0xdf 			},
	{ 0031,  4,   {  2,  5,  0,  5,  2,  5 },  "x-hat",         7600, 0xe007, 0x19 			},
	{ 0032,  4,   {  2,  5,  0,  5,  2,  2 },  "y-hat",         8100, 0x0177, 0x1a 			},
	{ 0033,  6,   {  0,  0,  0,  0, 31, 21 },  "sub-m",         5000, 0x2098, 0x1b 			},
	{ 0034,  4,   {  0,  0,  5,  2,  5,  0 },  "times",        12500, 0x00d7, 0xd7 			},
	{ 0035,  5,   {  0, 10,  5,  0, 10,  5 },  "approx",       15800, 0x2248, 0x1d 			},
	{ 0036,  5,   {  4, 10,  2,  7,  2, 15 },  "pound",        16500, 0x00a3, 0xa3 			},
	{ 0037,  6,   { 17, 10, 14,  4, 14,  4 },  "yen",          16600, 0x00a5, 0xa5 			},
	{ 0040,  5,   {  0,  0,  0,  0,  0,  0 },  "space",            0, 0x0020, 0x20 			},
	{ 0041,  2,   {  1,  1,  1,  1,  0,  1 },  "!",            13000, 0x0021, 0x21, "exclam" 	},
	{ 0042,  4,   {  5,  5,  0,  0,  0,  0 },  "dbl-quote",    13500, 0x0022, 0x22, "quotedbl" 	},
	{ 0043,  6,   {  0, 10, 31, 10, 31, 10 },  "#",            25500, 0x0023, 0x23, "numbersign" 	},
	{ 0044,  6,   {  4, 30,  5, 14, 20, 15 },  "$",            16300, 0x0024, 0x24, "dollar" 	},
	{ 0045,  6,   {  0, 19, 11,  4, 26, 25 },  "%",            16200, 0x0025, 0x25, "percent" 	},
	{ 0046,  6,   {  6,  9,  6, 25,  9, 22 },  "&",            17600, 0x0026, 0x26, "ampersand"	},
	{ 0047,  2,   {  1,  1,  0,  0,  0,  0 },  "'",            13400, 0x0027, 0x27, "quotesingle"	},
	{ 0050,  3,   {  2,  1,  1,  1,  1,  2 },  "(",            12100, 0x0028, 0x28, "parenleft" 	},
	{ 0051,  3,   {  1,  2,  2,  2,  2,  1 },  ")",            12200, 0x0029, 0x29, "parenright" 	},
	{ 0052,  6,   { 10,  4, 31,  4, 10,  0 },  "*",            13700, 0x002a, 0x2a, "asterisk" 	},
	{ 0053,  6,   {  0,  4,  4, 31,  4,  4 },  "+",            12300, 0x002b, 0x2b, "plus" 		},
	{ 0054,  3,   {  0,  0,  0,  3,  2,  1 },  ",",            12800, 0x002c, 0x2c, "comma" 	},
	{ 0055,  6,   {  0,  0,  0, 31,  0,  0 },  "-",            12400, 0x002d, 0x2d, "hyphen" 	},
	{ 0056,  3,   {  0,  0,  0,  0,  3,  3 },  ".",            12900, 0x002e, 0x2e, "period" 	},
	{ 0057,  4,   {  4,  4,  2,  2,  1,  1 },  "/",            12600, 0x002f, 0x2f, "slash" 	},
	{ 0060,  5,   {  6,  9, 13, 11,  9,  6 },  "0",             1000, 0x0030, 0x30, "zero" 		},
	{ 0061,  3,   {  2,  3,  2,  2,  2,  2 },  "1",             1100, 0x0031, 0x31, "one" 		},
	{ 0062,  5,   {  6,  9,  8,  4,  2, 15 },  "2",             1200, 0x0032, 0x32, "two" 		},
	{ 0063,  5,   { 15,  8,  4,  8,  9,  6 },  "3",             1300, 0x0033, 0x33, "three" 	},
	{ 0064,  5,   {  5,  5,  5, 15,  4,  4 },  "4",             1400, 0x0034, 0x34, "four" 		},
	{ 0065,  5,   { 15,  1,  7,  8,  8,  7 },  "5",             1500, 0x0035, 0x35, "five" 		},
	{ 0066,  5,   {  6,  1,  7,  9,  9,  6 },  "6",             1600, 0x0036, 0x36, "six" 		},
	{ 0067,  5,   { 15,  8,  4,  4,  2,  2 },  "7",             1700, 0x0037, 0x37, "seven" 	},
	{ 0070,  5,   {  6,  9,  6,  9,  9,  6 },  "8",             1800, 0x0038, 0x38, "eight" 	},
	{ 0071,  5,   {  6,  9,  9, 14,  8,  6 },  "9",             1900, 0x0039, 0x39, "nine" 		},
	{ 0072,  3,   {  0,  3,  3,  0,  3,  3 },  ":",            13200, 0x003a, 0x3a, "colon" 	},
	{ 0073,  3,   {  0,  3,  3,  0,  3,  2 },  ";",            13300, 0x003b, 0x3b, "semicolon" 	},
	{ 0074,  5,   {  0,  8,  4,  2, 15,  0 },  "<",            15500, 0x003c, 0x3c, "less" 		},
	{ 0075,  6,   {  0,  0, 31,  0, 31,  0 },  "=",            15700, 0x003d, 0x3d, "equal" 	},
	{ 0076,  5,   {  0,  1,  2,  4, 15,  0 },  ">",            16100, 0x003e, 0x3e, "greater" 	},
	{ 0077,  4,   {  3,  4,  4,  2,  0,  2 },  "?",            13100, 0x003f, 0x3f, "question" 	},
	{ 0100,  6,   { 14, 17, 21, 29,  1, 14 },  "@",            13800, 0x0040, 0x40, "at" 		},
	{ 0101,  6,   { 14, 17, 17, 31, 17, 17 },  "A",             2000, 0x0041, 0x41 			},
	{ 0102,  6,   { 15, 17, 15, 17, 17, 15 },  "B",             2600, 0x0042, 0x42 			},
	{ 0103,  6,   { 14, 17,  1,  1, 17, 14 },  "C",             2700, 0x0043, 0x43 			},
	{ 0104,  6,   { 15, 18, 18, 18, 18, 15 },  "D",             3100, 0x0044, 0x44 			},
	{ 0105,  6,   { 31,  1, 15,  1,  1, 31 },  "E",             3300, 0x0045, 0x45 			},
	{ 0106,  6,   { 31,  1, 15,  1,  1,  1 },  "F",             3800, 0x0046, 0x46 			},
	{ 0107,  6,   { 14, 17,  1, 25, 17, 14 },  "G",             3900, 0x0047, 0x47 			},
	{ 0110,  6,   { 17, 17, 31, 17, 17, 17 },  "H",             4000, 0x0048, 0x48 			},
	{ 0111,  4,   {  7,  2,  2,  2,  2,  7 },  "I",             4200, 0x0049, 0x49 			},
	{ 0112,  5,   {  8,  8,  8,  8,  9,  6 },  "J",             4700, 0x004a, 0x4a 			},
	{ 0113,  6,   { 17,  9,  7,  5,  9, 17 },  "K",             4800, 0x004b, 0x4b 			},
	{ 0114,  5,   {  1,  1,  1,  1,  1, 15 },  "L",             4900, 0x004c, 0x4c 			},
	{ 0115,  6,   { 17, 27, 21, 21, 17, 17 },  "M",             5000, 0x004d, 0x4d 			},
	{ 0116,  6,   { 17, 19, 21, 25, 17, 17 },  "N",             5100, 0x004e, 0x4e 			},
	{ 0117,  6,   { 14, 17, 17, 17, 17, 14 },  "O",             5300, 0x004f, 0x4f 			},
	{ 0120,  6,   { 15, 17, 17, 15,  1,  1 },  "P",             5900, 0x0050, 0x50 			},
	{ 0121,  6,   { 14, 17, 17, 21,  9, 22 },  "Q",             6000, 0x0051, 0x51 			},
	{ 0122,  6,   { 15, 17, 17, 15,  9, 17 },  "R",             6100, 0x0052, 0x52 			},
	{ 0123,  5,   {  6,  9,  2,  4,  9,  6 },  "S",             6300, 0x0053, 0x53 			},
	{ 0124,  6,   { 31,  4,  4,  4,  4,  4 },  "T",             6600, 0x0054, 0x54 			},
	{ 0125,  6,   { 17, 17, 17, 17, 17, 14 },  "U",             6700, 0x0055, 0x55 			},
	{ 0126,  6,   { 17, 17, 10, 10,  4,  4 },  "V",             7300, 0x0056, 0x56 			},
	{ 0127,  6,   { 17, 17, 21, 21, 27, 17 },  "W",             7400, 0x0057, 0x57 			},
	{ 0130,  6,   { 17, 10,  4,  4, 10, 17 },  "X",             7500, 0x0058, 0x58 			},
	{ 0131,  6,   { 17, 17, 10,  4,  4,  4 },  "Y",             7800, 0x0059, 0x59 			},
	{ 0132,  5,   { 15,  8,  4,  2,  1, 15 },  "Z",             8300, 0x005a, 0x5a 			},
	{ 0133,  4,   {  7,  1,  1,  1,  1,  7 },  "[",            18100, 0x005b, 0x5b, "bracketleft" 	},
	{ 0134,  4,   {  1,  1,  2,  2,  4,  4 },  "backslash",    17700, 0x005c, 0x5c 			},
	{ 0135,  4,   {  7,  4,  4,  4,  4,  7 },  "]",            18200, 0x005d, 0x5d, "bracketright" 	},
	{ 0136,  4,   {  2,  5,  0,  0,  0,  0 },  "^",            17800, 0x005e, 0x5e, "asciicircum" 	},
	{ 0137,  5,   {  0,  0,  0,  0,  0, 15 },  "_",            13900, 0x005f, 0x5f, "underscore" 	},
	{ 0140,  6,   {  0,  0,  0, 31, 16,  0 },  "not",          14100, 0x00ac, 0xac 			},
	{ 0141,  5,   {  0,  0, 14,  9,  9, 14 },  "a",             2000, 0x0061, 0x61 			},
	{ 0142,  5,   {  1,  1,  7,  9,  9,  7 },  "b",             2600, 0x0062, 0x62 			},
	{ 0143,  5,   {  0,  0,  6,  1,  1, 14 },  "c",             2700, 0x0063, 0x63 			},
	{ 0144,  5,   {  8,  8, 14,  9,  9, 14 },  "d",             3100, 0x0064, 0x64 			},
	{ 0145,  5,   {  0,  0,  6, 13,  3,  6 },  "e",             3300, 0x0065, 0x65 			},
	{ 0146,  5,   { 12,  2,  2,  7,  2,  2 },  "f",             3800, 0x0066, 0x66 			},
	{ 0147,  5,   {  0, 14,  9, 14,  8,  7 },  "g",             3900, 0x0067, 0x67 			},
	{ 0150,  5,   {  1,  1,  7,  9,  9,  9 },  "h",             4000, 0x0068, 0x68 			},
	{ 0151,  4,   {  2,  0,  3,  2,  2,  7 },  "i",             4200, 0x0069, 0x69 			},
	{ 0152,  4,   {  4,  0,  6,  4,  4,  3 },  "j",             4700, 0x006a, 0x6a 			},
	{ 0153,  5,   {  1,  1,  9,  7,  5,  9 },  "k",             4800, 0x006b, 0x6b 			},
	{ 0154,  4,   {  3,  2,  2,  2,  2,  7 },  "l",             4900, 0x006c, 0x6c 			},
	{ 0155,  6,   {  0,  0, 15, 21, 21, 21 },  "m",             5000, 0x006d, 0x6d 			},
	{ 0156,  5,   {  0,  0,  7,  9,  9,  9 },  "n",             5100, 0x006e, 0x6e 			},
	{ 0157,  5,   {  0,  0,  6,  9,  9,  6 },  "o",             5300, 0x006f, 0x6f 			},
	{ 0160,  5,   {  0,  0,  7,  9,  7,  1 },  "p",             5900, 0x0070, 0x70 			},
	{ 0161,  5,   {  0,  0, 14,  9, 14,  8 },  "q",             6000, 0x0071, 0x71 			},
	{ 0162,  5,   {  0,  0, 13,  3,  1,  1 },  "r",             6100, 0x0072, 0x72 			},
	{ 0163,  5,   {  0,  0, 14,  2,  4,  7 },  "s",             6300, 0x0073, 0x73 			},
	{ 0164,  5,   {  2,  2, 15,  2,  2, 12 },  "t",             6600, 0x0074, 0x74 			},
	{ 0165,  5,   {  0,  0,  9,  9,  9, 14 },  "u",             6700, 0x0075, 0x75 			},
	{ 0166,  6,   {  0,  0, 17, 17, 10,  4 },  "v",             7300, 0x0076, 0x76 			},
	{ 0167,  6,   {  0,  0, 17, 21, 21, 10 },  "w",             7400, 0x0077, 0x77 			},
	{ 0170,  4,   {  0,  0,  5,  2,  2,  5 },  "x",             7500, 0x0078, 0x78 			},
	{ 0171,  5,   {  0,  0,  9, 10,  4,  3 },  "y",             7800, 0x0079, 0x79 			},
	{ 0172,  5,   {  0,  0,  7,  4,  2, 14 },  "z",             8300, 0x007a, 0x7a 			},
	{ 0173,  4,   {  6,  2,  1,  1,  2,  6 },  "{",            18300, 0x007b, 0x7b, "braceleft" 	},
	{ 0174,  2,   {  1,  1,  1,  1,  1,  1 },  "|",            17900, 0x007c, 0x7c, "bar" 		},
	{ 0175,  4,   {  3,  2,  4,  4,  2,  3 },  "}",            18400, 0x007d, 0x7d, "braceright" 	},
	{ 0176,  6,   {  0,  2, 21,  8,  0,  0 },  "~",            14000, 0x007e, 0x7e, "asciitilde" 	},
	{ 0177,  4,   {  2,  7,  0,  0,  7,  2 },  "^v",           19100, 0x2195, 0x7f, "up-down" 	},
	{ 0200,  4,   {  3,  2,  4,  7,  0,  0 },  "^3",            1300, 0x00b3, 0xb3, "super-3" 	},
	{ 0201,  6,   {  0,  0,  0,  0, 21, 31 },  "sub-w",         7400, 0xe008, 0x81 			},
	{ 0202,  6,   { 31, 17,  1,  1,  1,  1 },  "GAMMA",         9300, 0x0393, 0x82 			},
	{ 0203,  6,   {  4,  4, 10, 10, 17, 31 },  "DELTA",         9400, 0x0394, 0x83 			},
	{ 0204,  6,   { 15, 18, 23, 18, 18, 15 },  "D-bar",         3200, 0x00d0, 0xd0 			},
	{ 0205,  6,   {  8, 28,  8, 14,  9, 14 },  "d-bar",         3200, 0x00f0, 0xf0 			},
	{ 0206,  4,   {  0,  0,  0,  4,  7,  7 },  "sub-d",         3100, 0xe009, 0x0e 			},
	{ 0207,  6,   { 14, 17, 17, 31, 17, 14 },  "THETA",         9800, 0x0398, 0x86 			},
	{ 0210,  6,   { 30,  5, 29,  7,  5, 29 },  "AE",            2500, 0x00c6, 0xc6 			},
	{ 0211,  6,   {  0,  0, 30, 21, 13, 30 },  "ae",            2500, 0x00e6, 0xe6 			},
	{ 0212,  6,   {  4,  4, 10, 10, 17, 17 },  "LAMBDA",       10100, 0x039b, 0x88 			},
	{ 0213,  1,   {  0,  0,  0,  0,  0,  0 },  "0213",             0, 0xe00a, 0x08 			},
	{ 0214,  1,   {  0,  0,  0,  0,  0,  0 },  "0214",             0, 0xa00b, 0x09 			},
	{ 0215,  6,   { 31,  0, 14,  0,  0, 31 },  "XI",           10400, 0x039e, 0x8d 			},
	{ 0216,  6,   {  0, 14, 17, 21, 17, 14 },  "sol",          17400, 0x2609, 0x84 			},
	{ 0217,  6,   { 31, 10, 10, 10, 10, 10 },  "PI",           10600, 0x03a0, 0x8f 			},
	{ 0220,  1,   {  0,  0,  0,  0,  0,  0 },  "0220",             0, 0xe00c, 0x0a 			},
	{ 0221,  6,   { 31,  2,  4,  4,  2, 31 },  "SIGMA",        10800, 0x03a3, 0x91 			},
	{ 0222,  1,   {  0,  0,  0,  0,  0,  0 },  "0222",             0, 0xe00d, 0x0b 			},
	{ 0223,  1,   {  0,  0,  0,  0,  0,  0 },  "0223",             0, 0xe00e, 0x0c 			},
	{ 0224,  6,   {  4, 14, 21, 21, 14,  4 },  "PHI",          11100, 0x03a6, 0x94 			},
	{ 0225,  1,   {  0,  0,  0,  0,  0,  0 },  "0225",             0, 0xe00f, 0x0d 			},
	{ 0226,  6,   {  4, 21, 21, 14,  4,  4 },  "PSI",          11300, 0x03a8, 0x96 			},
	{ 0227,  6,   { 14, 17, 17, 17, 10, 27 },  "OMEGA",        11400, 0x03a9, 0x97 			},
	{ 0230,  4,   {  0,  0,  0,  3,  7,  7 },  "sub-B",         2600, 0xe010, 0x98 			},
	{ 0231,  4,   {  0,  0,  0,  5,  7,  1 },  "sub-mu",       10200, 0xe011, 0x99 			},
	{ 0232,  4,   {  7,  4,  2,  7,  0,  0 },  "^2",            1200, 0x00b2, 0xb2, "super-2" 	},
	{ 0233,  6,   {  0,  0,  0, 10, 21, 10 },  "sub-infinity", 17300, 0xe012, 0x9b 			},
	{ 0234,  4,   {  5,  2,  5,  0,  0,  0 },  "^x",            7500, 0xe013, 0x9c, "super-x" 	},
	{ 0235,  6,   { 16, 24, 19, 16,  0,  0 },  "^-1",          12400, 0xe014, 0x9d, "reciprocal" 	},
	{ 0236,  6,   {  2, 15,  2, 14, 18, 18 },  "h-bar",         4100, 0x0127, 0x92 			},
	{ 0237,  6,   {  0,  0, 10, 21, 21, 10 },  "infinity",     17300, 0x221e, 0x85 			},
	{ 0240,  6,   {  0,  0, 22,  9,  9, 22 },  "alpha",         9100, 0x03b1, 0x90 			},
	{ 0241,  5,   {  2,  5,  7,  9,  7,  1 },  "beta",          9200, 0x03b2, 0xa1 			},
	{ 0242,  5,   {  0, 10,  5,  4,  4,  4 },  "gamma",         9300, 0x03b3, 0xa2 			},
	{ 0243,  5,   {  4,  2,  4, 14,  9,  6 },  "delta",         9400, 0x03b4, 0x93 			},
	{ 0244,  5,   {  0,  6,  1,  2,  9,  6 },  "epsilon",       9500, 0x03b5, 0xa4 			},
	{ 0245,  5,   { 15,  8,  4,  2, 14,  8 },  "zeta",          9600, 0x03b6, 0x95 			},
	{ 0246,  6,   {  0,  0, 13, 18, 18, 16 },  "eta",           9700, 0x03b7, 0xa6 			},
	{ 0247,  6,   {  6,  9,  9, 30,  9,  6 },  "theta",         9800, 0x03b8, 0xa7 			},
	{ 0250,  3,   {  0,  0,  1,  1,  1,  3 },  "iota",          9900, 0x03b9, 0xa8 			},
	{ 0251,  5,   {  0,  0, 13,  3,  5,  9 },  "kappa",        10000, 0x03ba, 0xa9 			},
	{ 0252,  5,   {  1,  2,  4,  4, 10,  9 },  "lambda",       10100, 0x03bb, 0xaa 			},
	{ 0253,  5,   {  0,  0,  9,  9, 15,  1 },  "mu",           10200, 0x03bc, 0xb5 			},
	{ 0254,  5,   {  0,  0,  9,  9,  5,  3 },  "nu",           10300, 0x03bd, 0x8b 			},
	{ 0255,  5,   { 15,  4, 14,  4, 14,  8 },  "xi",           10400, 0x03be, 0xad 			},
	{ 0256,  6,   {  0, 14, 21, 31, 21, 14 },  "terra",        17500, 0x2641, 0xae 			},
	{ 0257,  6,   {  0,  0, 31, 10, 10, 26 },  "pi",           10600, 0x03c0, 0x60 			},
	{ 0260,  6,   {  0,  0, 28, 18, 14,  3 },  "rho",          10700, 0x03c1, 0xaf 			},
	{ 0261,  6,   {  0,  0, 30,  9,  9,  6 },  "sigma",        10800, 0x03c3, 0x8c 			},
	{ 0262,  5,   {  0,  0, 15,  2,  2,  6 },  "tau",          10900, 0x03c4, 0x89 			},
	{ 0263,  6,   {  0,  0, 19, 18, 18, 14 },  "upsilon",      11000, 0x03c5, 0xde 			},
	{ 0264,  6,   {  0, 14, 21, 21, 14,  4 },  "phi",          11100, 0x03c6, 0xb4 			},
	{ 0265,  6,   {  0, 22, 12,  4,  6, 13 },  "chi",          11200, 0x03c7, 0xd4 			},
	{ 0266,  6,   {  0,  0, 21, 21, 14,  4 },  "psi",          11300, 0x03c8, 0xb6 			},
	{ 0267,  6,   {  0,  0, 10, 17, 21, 10 },  "omega",        11400, 0x03c9, 0xb7 			},
	{ 0270,  4,   {  0,  0,  0,  7,  5,  7 },  "sub-0",         1000, 0x2080, 0xb8 			},
	{ 0271,  3,   {  0,  0,  2,  3,  2,  2 },  "sub-1",         1100, 0x2081, 0xb9 			},
	{ 0272,  4,   {  0,  0,  7,  4,  2,  7 },  "sub-2",         1200, 0x2082, 0xba 			},
	{ 0273,  4,   {  0,  0,  0,  7,  1,  7 },  "sub-c",         2700, 0xe015, 0xee 			},
	{ 0274,  4,   {  0,  0,  0,  7,  3,  6 },  "sub-e",         3300, 0x2091, 0xbc 			},
	{ 0275,  4,   {  0,  0,  0,  0,  7,  5 },  "sub-n",         5100, 0x2099, 0xbd 			},
	{ 0276,  4,   {  0,  0,  0,  7,  7,  1 },  "sub-p",         5900, 0x209a, 0xbe 			},
	{ 0277,  4,   {  0,  0,  0,  0,  5,  7 },  "sub-u",         6600, 0xe016, 0xbf 			},
	{ 0300,  6,   {  3,  0, 14, 17, 31, 17 },  "A-grave",       2100, 0x00c0, 0xc0 			},
	{ 0301,  6,   { 24,  0, 14, 17, 31, 17 },  "A-acute",       2200, 0x00c1, 0xc1 			},
	{ 0302,  6,   { 14,  0, 14, 17, 31, 17 },  "A-tilde",       2300, 0x00c3, 0xc3 			},
	{ 0303,  6,   { 10,  0, 14, 17, 31, 17 },  "A-umlaut",      2400, 0x00c4, 0xc4 			},
	{ 0304,  6,   {  4,  0, 14, 17, 31, 17 },  "A-dot",         2600, 0x00c2, 0xc2 			},
	{ 0305,  6,   { 24,  0, 30,  1,  1, 30 },  "C-acute",       2800, 0x0106, 0xf7 			},
	{ 0306,  6,   { 14,  0, 30,  1,  1, 30 },  "C-hook",        2900, 0x010c, 0xfe 			},
	{ 0307,  6,   { 14, 17,  1,  1, 30,  3 },  "C-cedilla",     3000, 0x00c7, 0xc7 			},
	{ 0310,  6,   {  3,  0, 31, 15,  1, 31 },  "E-grave",       3400, 0x00c8, 0xc8 			},
	{ 0311,  6,   { 24,  0, 31, 15,  1, 31 },  "E-acute",       3500, 0x00c9, 0xc9 			},
	{ 0312,  6,   { 14,  0, 31, 15,  1, 31 },  "E-tilde",       3600, 0x0112, 0xca 			},
	{ 0313,  6,   { 10,  0, 31, 15,  1, 31 },  "E-trema",       3700, 0x00cb, 0xcb 			},
	{ 0314,  4,   {  3,  0,  7,  2,  2,  7 },  "I-grave",       4300, 0x00cc, 0xcc 			},
	{ 0315,  4,   {  6,  0,  7,  2,  2,  7 },  "I-acute",       4400, 0x00cd, 0xcd 			},
	{ 0316,  4,   {  7,  0,  7,  2,  2,  7 },  "I-tilde",       4500, 0x0128, 0xce 			},
	{ 0317,  4,   {  5,  0,  7,  2,  2,  7 },  "I-trema",       4600, 0x00cf, 0xcf 			},
	{ 0320,  6,   { 14,  0, 19, 21, 25, 17 },  "N-tilde",       5200, 0x00d1, 0xd1 			},
	{ 0321,  6,   {  3,  0, 14, 17, 17, 14 },  "O-grave",       5400, 0x00d2, 0xd2 			},
	{ 0322,  6,   { 24,  0, 14, 17, 17, 14 },  "O-acute",       5500, 0x00d3, 0xd3 			},
	{ 0323,  6,   { 14,  0, 14, 17, 17, 14 },  "O-tilde",       5600, 0x00d5, 0xd5 			},
	{ 0324,  6,   { 10,  0, 14, 17, 17, 14 },  "O-umlaut",      5700, 0x00d6, 0xd6 			},
	{ 0325,  6,   { 14,  0, 15, 17, 15, 17 },  "R-hook",        6200, 0x0158, 0x15 			},
	{ 0326,  5,   { 14,  0, 14,  3, 12,  7 },  "S-hook",        6400, 0x0160, 0x8a 			},
	{ 0327,  4,   {  0,  0,  0,  7,  7,  5 },  "sub-A",         2000, 0x2090, 0x16 			},
	{ 0330,  6,   {  2,  4, 17, 17, 17, 14 },  "U-grave",       6800, 0x00d9, 0xd9 			},
	{ 0331,  6,   {  8,  4, 17, 17, 17, 14 },  "U-acute",       6900, 0x00da, 0xda 			},
	{ 0332,  6,   { 14,  0, 17, 17, 17, 14 },  "U-tilde",       7000, 0x0168, 0x18 			},
	{ 0333,  6,   { 10,  0, 17, 17, 17, 14 },  "U-umlaut",      7100, 0x00dc, 0xdc 			},
	{ 0334,  6,   {  4,  0, 17, 17, 17, 14 },  "U-dot",         7200, 0x00db, 0xdb 			},
	{ 0335,  6,   {  8,  4, 17, 10,  4,  4 },  "Y-acute",       7900, 0x00dd, 0xdd 			},
	{ 0336,  6,   { 10,  0, 17, 10,  4,  4 },  "Y-trema",       8100, 0x0178, 0x9f 			},
	{ 0337,  5,   { 15,  0, 15,  4,  2, 15 },  "Z-hook",        8400, 0x017d, 0x8e 			},
	{ 0340,  5,   {  3,  0, 14,  9,  9, 14 },  "a-grave",       2100, 0x00e0, 0xe0 			},
	{ 0341,  5,   { 12,  0, 14,  9,  9, 14 },  "a-acute",       2200, 0x00e1, 0xe1 			},
	{ 0342,  5,   { 15,  0, 14,  9,  9, 14 },  "a-tilde",       2300, 0x00e3, 0xe3 			},
	{ 0343,  5,   { 10,  0, 14,  9,  9, 14 },  "a-umlaut",      2400, 0x00e4, 0xe4 			},
	{ 0344,  5,   {  4,  0, 14,  9,  9, 14 },  "a-dot",         2600, 0x00e2, 0xe2 			},
	{ 0345,  5,   { 12,  0,  6,  1,  1, 14 },  "c-acute",       2800, 0x0107, 0x1c 			},
	{ 0346,  5,   { 15,  0,  6,  1,  1, 14 },  "c-hook",        2900, 0x010d, 0x1e 			},
	{ 0347,  5,   {  0,  6,  1,  1, 14,  3 },  "c-cedilla",     3000, 0x00e7, 0xe7 			},
	{ 0350,  5,   {  3,  0,  6, 13,  3,  6 },  "e-grave",       3400, 0x00e8, 0xe8 			},
	{ 0351,  5,   { 12,  0,  6, 13,  3,  6 },  "e-acute",       3500, 0x00e9, 0xe9 			},
	{ 0352,  5,   { 15,  0,  6, 13,  3,  6 },  "e-tilde",       3600, 0x0113, 0x1f 			},
	{ 0353,  5,   {  5,  0,  6, 13,  3,  6 },  "e-trema",       3700, 0x00eb, 0xeb 			},
	{ 0354,  4,   {  3,  0,  3,  2,  2,  7 },  "i-grave",       4300, 0x00ec, 0xec 			},
	{ 0355,  4,   {  6,  0,  3,  2,  2,  7 },  "i-acute",       4400, 0x00ed, 0xed 			},
	{ 0356,  4,   {  7,  0,  3,  2,  2,  7 },  "i-tilde",       4500, 0x0129, 0xc5 			},
	{ 0357,  4,   {  5,  0,  3,  2,  2,  7 },  "i-trema",       4600, 0x00ef, 0xef 			},
	{ 0360,  5,   { 15,  0,  7,  9,  9,  9 },  "n-tilde",       5200, 0x00f1, 0xf1 			},
	{ 0361,  5,   {  3,  0,  6,  9,  9,  6 },  "o-grave",       5400, 0x00f2, 0xf2 			},
	{ 0362,  5,   { 12,  0,  6,  9,  9,  6 },  "o-acute",       5500, 0x00f3, 0xf3 			},
	{ 0363,  5,   { 15,  0,  6,  9,  9,  6 },  "o-tilde",       5600, 0x00f5, 0xf5 			},
	{ 0364,  5,   {  9,  0,  6,  9,  9,  6 },  "o-umlaut",      5700, 0x00f6, 0xf6 			},
	{ 0365,  5,   { 15,  0, 13,  3,  1,  1 },  "r-hook",        6200, 0x0159, 0xe5 			},
	{ 0366,  5,   { 14,  0, 14,  2,  4,  7 },  "s-hook",        6400, 0x0161, 0x9a 			},
	{ 0367,  4,   {  0,  0,  0,  5,  3,  5 },  "sub-k",         4800, 0x2096, 0xea 			},
	{ 0370,  5,   {  3,  0,  9,  9,  9, 14 },  "u-grave",       6800, 0x00f9, 0xf9 			},
	{ 0371,  5,   { 12,  0,  9,  9,  9, 14 },  "u-acute",       6900, 0x00fa, 0xfa 			},
	{ 0372,  5,   { 15,  0,  9,  9,  9, 14 },  "u-tilde",       7000, 0x0169, 0xf4 			},
	{ 0373,  5,   {  9,  0,  9,  9,  9, 14 },  "u-umlaut",      7100, 0x00fc, 0xfc 			},
	{ 0374,  5,   {  4,  0,  9,  9,  9, 14 },  "u-dot",         7200, 0x00fb, 0xfb 			},
	{ 0375,  5,   { 12,  0,  9, 10,  4,  3 },  "y-acute",       7900, 0x00fd, 0xfd 			},
	{ 0376,  5,   {  9,  0,  9, 10,  4,  3 },  "y-trema",       8100, 0x00ff, 0xff 			},
	{ 0377,  5,   {  7,  0,  7,  4,  2, 14 },  "z-hook",        8400, 0x017e, 0x9e 			},

	{ 0400,  1,   {  0,  0,  0,  0,  0,  0 },  "small (null)",           -1 },
	{ 0401,  4,   {  7,  0,  5,  2,  5,  0 },  "small x-bar",            -1 },
	{ 0402,  4,   {  7,  0,  5,  7,  4,  3 },  "small y-bar",            -1 },
	{ 0403,  5,   { 14,  2,  2,  3,  2,  0 },  "small sqrt",             -1 },
	{ 0404,  4,   {  6,  2,  2,  2,  2,  3 },  "small integral",         -1 },
	{ 0405,  4,   {  7,  5,  7,  0,  0,  0 },  "small degree",           -1 },
	{ 0406,  1,   {  0,  0,  0,  0,  0,  0 },  "small narrow-space",     -1 },
	{ 0407,  5,   { 14,  1, 13,  9, 14,  0 },  "small grad",             -1 },
	{ 0410,  4,   {  2,  7,  2,  0,  7,  0 },  "small +/-",              -1 },
	{ 0411,  4,   {  4,  2,  7,  0,  7,  0 },  "small <=",               -1 },
	{ 0412,  4,   {  1,  2,  7,  0,  7,  0 },  "small >=",               -1 },
	{ 0413,  4,   {  2,  7,  2,  7,  2,  0 },  "small !=",               -1 },
	{ 0414,  5,   { 14,  1,  7,  1, 14,  0 },  "small euro",             -1 },
	{ 0415,  5,   {  2,  4, 15,  4,  2,  0 },  "small ->",               -1 },
	{ 0416,  5,   {  4,  2, 15,  2,  4,  0 },  "small <-",               -1 },
	{ 0417,  4,   {  2,  2,  2,  7,  2,  0 },  "small v",                -1 },
	{ 0420,  4,   {  2,  7,  2,  2,  2,  0 },  "small ^",                -1 },
	{ 0421,  4,   {  6,  2,  7,  2,  0,  0 },  "small f-shift",          -1 },
	{ 0422,  4,   {  7,  7,  4,  3,  0,  0 },  "small g-shift",          -1 },
	{ 0423,  4,   {  1,  7,  5,  0,  0,  0 },  "small h-shift",          -1 },
	{ 0424,  3,   {  3,  1,  3,  0,  0,  0 },  "small cmplx",            -1 },
	{ 0425,  6,   { 30, 25, 21, 19, 15,  0 },  "small O-slash",          -1 },
	{ 0426,  5,   {  0, 14, 13, 11,  7,  0 },  "small o-slash",          -1 },
	{ 0427,  6,   {  2, 31,  2,  8, 31,  8 },  "small <->",              -1 },
	{ 0430,  4,   {  3,  5,  3,  5,  7,  1 },  "small sz",               -1 },
	{ 0431,  4,   {  2,  5,  0,  5,  2,  5 },  "small x-hat",            -1 },
	{ 0432,  4,   {  2,  5,  0,  5,  2,  2 },  "small y-hat",            -1 },
	{ 0433,  6,   {  0,  0,  0,  0, 31, 21 },  "small sub-m",            -1 },
	{ 0434,  4,   {  0,  5,  2,  5,  0,  0 },  "small times",            -1 },
	{ 0435,  5,   { 10,  5,  0, 10,  5,  0 },  "small approx",           -1 },
	{ 0436,  5,   {  6,  2,  7,  2, 15,  0 },  "small pound",            -1 },
	{ 0437,  6,   { 17, 14,  4, 14,  4,  0 },  "small yen",              -1 },
	{ 0440,  2,   {  0,  0,  0,  0,  0,  0 },  "small  ",                -1 },
	{ 0441,  2,   {  1,  1,  1,  0,  1,  0 },  "small !",                -1 },
	{ 0442,  4,   {  5,  5,  0,  0,  0,  0 },  "small \"",               -1 },
	{ 0443,  6,   { 10, 31, 10, 31, 10,  0 },  "small #",                -1 },
	{ 0444,  6,   { 30,  5, 14, 20, 15,  0 },  "small $",                -1 },
	{ 0445,  4,   {  1,  4,  2,  1,  4,  0 },  "small %",                -1 },
	{ 0446,  5,   {  7,  5,  2, 13,  7,  8 },  "small &",                -1 },
	{ 0447,  2,   {  1,  1,  0,  0,  0,  0 },  "small '",                -1 },
	{ 0450,  3,   {  2,  1,  1,  1,  2,  0 },  "small (",                -1 },
	{ 0451,  3,   {  1,  2,  2,  2,  1,  0 },  "small )",                -1 },
	{ 0452,  6,   { 10,  4, 31,  4, 10,  0 },  "small *",                -1 },
	{ 0453,  4,   {  0,  2,  7,  2,  0,  0 },  "small +",                -1 },
	{ 0454,  3,   {  0,  0,  0,  0,  2,  1 },  "small ,",                -1 },
	{ 0455,  4,   {  0,  0,  7,  0,  0,  0 },  "small -",                -1 },
	{ 0456,  2,   {  0,  0,  0,  0,  1,  0 },  "small .",                -1 },
	{ 0457,  4,   {  4,  4,  2,  2,  1,  1 },  "small /",                -1 },
	{ 0460,  4,   {  6,  5,  5,  5,  3,  0 },  "small 0",                -1 },
	{ 0461,  3,   {  2,  3,  2,  2,  2,  0 },  "small 1",                -1 },
	{ 0462,  4,   {  7,  4,  6,  1,  7,  0 },  "small 2",                -1 },
	{ 0463,  4,   {  7,  4,  6,  4,  7,  0 },  "small 3",                -1 },
	{ 0464,  4,   {  5,  5,  7,  4,  4,  0 },  "small 4",                -1 },
	{ 0465,  4,   {  7,  1,  7,  4,  7,  0 },  "small 5",                -1 },
	{ 0466,  4,   {  6,  1,  7,  5,  7,  0 },  "small 6",                -1 },
	{ 0467,  4,   {  7,  4,  4,  2,  2,  0 },  "small 7",                -1 },
	{ 0470,  4,   {  7,  5,  7,  5,  7,  0 },  "small 8",                -1 },
	{ 0471,  4,   {  7,  5,  7,  4,  3,  0 },  "small 9",                -1 },
	{ 0472,  2,   {  0,  1,  0,  1,  0,  0 },  "small :",                -1 },
	{ 0473,  3,   {  0,  0,  2,  0,  2,  1 },  "small ;",                -1 },
	{ 0474,  4,   {  4,  2,  1,  2,  4,  0 },  "small <",                -1 },
	{ 0475,  4,   {  0,  7,  0,  7,  0,  0 },  "small =",                -1 },
	{ 0476,  4,   {  1,  2,  4,  2,  1,  0 },  "small >",                -1 },
	{ 0477,  4,   {  7,  4,  6,  0,  2,  0 },  "small ?",                -1 },
	{ 0500,  5,   {  6,  9, 13,  1, 14,  0 },  "small @",                -1 },
	{ 0501,  4,   {  2,  5,  7,  5,  5,  0 },  "small A",                -1 },
	{ 0502,  4,   {  3,  5,  3,  5,  3,  0 },  "small B",                -1 },
	{ 0503,  4,   {  6,  1,  1,  1,  6,  0 },  "small C",                -1 },
	{ 0504,  4,   {  3,  5,  5,  5,  3,  0 },  "small D",                -1 },
	{ 0505,  4,   {  7,  1,  3,  1,  7,  0 },  "small E",                -1 },
	{ 0506,  4,   {  7,  1,  3,  1,  1,  0 },  "small F",                -1 },
	{ 0507,  4,   {  6,  1,  5,  5,  7,  0 },  "small G",                -1 },
	{ 0510,  4,   {  5,  5,  7,  5,  5,  0 },  "small H",                -1 },
	{ 0511,  2,   {  1,  1,  1,  1,  1,  0 },  "small I",                -1 },
	{ 0512,  4,   {  4,  4,  4,  5,  7,  0 },  "small J",                -1 },
	{ 0513,  5,   {  9,  5,  3,  5,  9,  0 },  "small K",                -1 },
	{ 0514,  4,   {  1,  1,  1,  1,  7,  0 },  "small L",                -1 },
	{ 0515,  6,   { 17, 27, 21, 17, 17,  0 },  "small M",                -1 },
	{ 0516,  5,   {  9, 11, 13,  9,  9,  0 },  "small N",                -1 },
	{ 0517,  4,   {  7,  5,  5,  5,  7,  0 },  "small O",                -1 },
	{ 0520,  4,   {  7,  5,  7,  1,  1,  0 },  "small P",                -1 },
	{ 0521,  5,   {  6,  9,  9,  5, 10,  0 },  "small Q",                -1 },
	{ 0522,  4,   {  3,  5,  3,  5,  5,  0 },  "small R",                -1 },
	{ 0523,  4,   {  6,  1,  2,  4,  3,  0 },  "small S",                -1 },
	{ 0524,  4,   {  7,  2,  2,  2,  2,  0 },  "small T",                -1 },
	{ 0525,  4,   {  5,  5,  5,  5,  7,  0 },  "small U",                -1 },
	{ 0526,  4,   {  5,  5,  5,  2,  2,  0 },  "small V",                -1 },
	{ 0527,  6,   { 17, 17, 21, 27, 17,  0 },  "small W",                -1 },
	{ 0530,  4,   {  5,  5,  2,  5,  5,  0 },  "small X",                -1 },
	{ 0531,  4,   {  5,  5,  2,  2,  2,  0 },  "small Y",                -1 },
	{ 0532,  4,   {  7,  4,  2,  1,  7,  0 },  "small Z",                -1 },
	{ 0533,  3,   {  3,  1,  1,  1,  3,  0 },  "small [",                -1 },
	{ 0534,  4,   {  1,  1,  2,  2,  4,  4 },  "small \\",               -1 },
	{ 0535,  3,   {  3,  2,  2,  2,  3,  0 },  "small ]",                -1 },
	{ 0536,  4,   {  2,  5,  0,  0,  0,  0 },  "small ^",                -1 },
	{ 0537,  4,   {  0,  0,  0,  0,  0,  7 },  "small _",                -1 },
	{ 0540,  4,   {  0,  0,  7,  4,  0,  0 },  "small `",                -1 },
	{ 0541,  4,   {  0,  6,  5,  5,  6,  0 },  "small a",                -1 },
	{ 0542,  4,   {  1,  3,  5,  5,  3,  0 },  "small b",                -1 },
	{ 0543,  4,   {  0,  6,  1,  1,  6,  0 },  "small c",                -1 },
	{ 0544,  4,   {  4,  6,  5,  5,  6,  0 },  "small d",                -1 },
	{ 0545,  4,   {  0,  6,  5,  3,  6,  0 },  "small e",                -1 },
	{ 0546,  4,   {  6,  2,  7,  2,  2,  0 },  "small f",                -1 },
	{ 0547,  4,   {  0,  6,  5,  7,  4,  3 },  "small g",                -1 },
	{ 0550,  4,   {  1,  3,  5,  5,  5,  0 },  "small h",                -1 },
	{ 0551,  3,   {  1,  0,  1,  1,  3,  0 },  "small i",                -1 },
	{ 0552,  3,   {  2,  0,  2,  2,  2,  3 },  "small j",                -1 },
	{ 0553,  4,   {  1,  5,  3,  5,  5,  0 },  "small k",                -1 },
	{ 0554,  3,   {  1,  1,  1,  1,  3,  0 },  "small l",                -1 },
	{ 0555,  6,   {  0, 15, 21, 21, 21,  0 },  "small m",                -1 },
	{ 0556,  4,   {  0,  3,  5,  5,  5,  0 },  "small n",                -1 },
	{ 0557,  4,   {  0,  3,  5,  5,  6,  0 },  "small o",                -1 },
	{ 0560,  4,   {  0,  3,  5,  5,  3,  1 },  "small p",                -1 },
	{ 0561,  4,   {  0,  6,  5,  5,  6,  4 },  "small q",                -1 },
	{ 0562,  4,   {  0,  6,  1,  1,  1,  0 },  "small r",                -1 },
	{ 0563,  4,   {  0,  7,  1,  4,  7,  0 },  "small s",                -1 },
	{ 0564,  4,   {  2,  7,  2,  2,  6,  0 },  "small t",                -1 },
	{ 0565,  4,   {  0,  5,  5,  5,  6,  0 },  "small u",                -1 },
	{ 0566,  4,   {  0,  5,  5,  7,  2,  0 },  "small v",                -1 },
	{ 0567,  6,   {  0, 17, 21, 21, 10,  0 },  "small w",                -1 },
	{ 0570,  4,   {  0,  5,  2,  2,  5,  0 },  "small x",                -1 },
	{ 0571,  4,   {  0,  5,  5,  6,  4,  3 },  "small y",                -1 },
	{ 0572,  4,   {  0,  7,  4,  1,  7,  0 },  "small z",                -1 },
	{ 0573,  4,   {  6,  2,  3,  2,  6,  0 },  "small {",                -1 },
	{ 0574,  2,   {  1,  1,  1,  1,  1,  1 },  "small |",                -1 },
	{ 0575,  4,   {  3,  2,  6,  2,  3,  0 },  "small }",                -1 },
	{ 0576,  5,   {  0, 10,  5,  0,  0,  0 },  "small ~",                -1 },
	{ 0577,  4,   {  2,  7,  0,  0,  7,  2 },  "small ^v",               -1 },
	{ 0600,  4,   {  3,  2,  4,  7,  0,  0 },  "small ^3",               -1 },
	{ 0601,  6,   {  0,  0,  0,  0, 21, 31 },  "small sub-w",            -1 },
	{ 0602,  4,   {  7,  1,  1,  1,  1,  0 },  "small GAMMA",            -1 },
	{ 0603,  5,   {  8, 12, 10,  9, 15,  0 },  "small DELTA",            -1 },
	{ 0604,  5,   {  6, 10, 11, 10,  6,  0 },  "small D-bar",            -1 },
	{ 0605,  5,   {  4, 14,  5,  5,  6,  0 },  "small d-bar",            -1 },
	{ 0606,  3,   {  0,  0,  0,  2,  3,  3 },  "small sub-d",            -1 },
	{ 0607,  5,   {  6,  9, 15,  9,  6,  0 },  "small THETA",            -1 },
	{ 0610,  5,   { 14,  5, 15,  5, 13,  0 },  "small AE",               -1 },
	{ 0611,  6,   {  0, 30, 21, 13, 30,  0 },  "small ae",               -1 },
	{ 0612,  4,   {  2,  2,  5,  5,  5,  0 },  "small LAMBDA",           -1 },
	{ 0613,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0213",             -1 },
	{ 0614,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0214",             -1 },
	{ 0615,  5,   { 15,  0,  6,  0, 15,  0 },  "small XI",               -1 },
	{ 0616,  6,   {  0, 14, 17, 21, 17, 14 },  "small sol",              -1 },
	{ 0617,  4,   {  7,  5,  5,  5,  5,  0 },  "small PI",               -1 },
	{ 0620,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0220",             -1 },
	{ 0621,  5,   { 15,  2,  4,  2, 15,  0 },  "small SIGMA",            -1 },
	{ 0622,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0222",             -1 },
	{ 0623,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0223",             -1 },
	{ 0624,  6,   {  4, 31, 21, 31,  4,  0 },  "small PHI",              -1 },
	{ 0625,  1,   {  0,  0,  0,  0,  0,  0 },  "small 0225",             -1 },
	{ 0626,  6,   { 21, 21, 14,  4,  4,  0 },  "small PSI",              -1 },
	{ 0627,  5,   {  6,  9,  9,  6, 15,  0 },  "small OMEGA",            -1 },
	{ 0630,  4,   {  0,  0,  0,  3,  7,  7 },  "small sub-B",            -1 },
	{ 0631,  4,   {  0,  0,  0,  5,  7,  1 },  "small sub-mu",           -1 },
	{ 0632,  3,   {  3,  2,  1,  3,  0,  0 },  "small ^2",               -1 },
	{ 0633,  6,   {  0,  0,  0, 10, 21, 10 },  "small sub-infinity",     -1 },
	{ 0634,  4,   {  5,  2,  5,  0,  0,  0 },  "small ^x",               -1 },
	{ 0635,  5,   {  8, 11,  8,  0,  0,  0 },  "small ^-1",              -1 },
	{ 0636,  5,   {  2,  7,  2, 14, 10,  0 },  "small h-bar",            -1 },
	{ 0637,  6,   {  0, 10, 21, 21, 10,  0 },  "small infinity",         -1 },
	{ 0640,  5,   {  0, 10,  5,  5, 10,  0 },  "small alpha",            -1 },
	{ 0641,  4,   {  2,  5,  3,  5,  3,  1 },  "small beta",             -1 },
	{ 0642,  4,   {  0,  5,  2,  2,  2,  2 },  "small gamma",            -1 },
	{ 0643,  4,   {  2,  1,  2,  5,  7,  0 },  "small delta",            -1 },
	{ 0644,  4,   {  6,  1,  6,  1,  6,  0 },  "small epsilon",          -1 },
	{ 0645,  4,   {  7,  4,  2,  1,  7,  4 },  "small zeta",             -1 },
	{ 0646,  5,   {  0,  7, 10, 10,  8,  8 },  "small eta",              -1 },
	{ 0647,  5,   {  7,  5, 14,  5,  7,  0 },  "small theta",            -1 },
	{ 0650,  3,   {  0,  1,  1,  1,  3,  0 },  "small iota",             -1 },
	{ 0651,  4,   {  0,  5,  3,  5,  5,  0 },  "small kappa",            -1 },
	{ 0652,  4,   {  3,  4,  4,  6,  5,  0 },  "small lambda",           -1 },
	{ 0653,  4,   {  0,  5,  5,  5,  7,  1 },  "small mu",               -1 },
	{ 0654,  4,   {  0,  5,  5,  3,  3,  0 },  "small nu",               -1 },
	{ 0655,  4,   {  7,  2,  7,  2,  7,  4 },  "small xi",               -1 },
	{ 0656,  6,   {  0, 14, 21, 31, 21, 14 },  "small terra",            -1 },
	{ 0657,  5,   {  0, 15,  5,  5, 13,  0 },  "small pi",               -1 },
	{ 0660,  5,   {  0, 12, 10, 14,  2,  3 },  "small rho",              -1 },
	{ 0661,  5,   {  0, 14,  5,  5,  2,  0 },  "small sigma",            -1 },
	{ 0662,  4,   {  0,  7,  2,  2,  6,  0 },  "small tau",              -1 },
	{ 0663,  5,   {  0, 11, 10, 10,  6,  0 },  "small upsilon",          -1 },
	{ 0664,  6,   {  0, 14, 21, 21, 14,  4 },  "small phi",              -1 },
	{ 0665,  4,   {  0,  5,  5,  2,  5,  5 },  "small chi",              -1 },
	{ 0666,  6,   {  0, 21, 21, 14,  4,  4 },  "small psi",              -1 },
	{ 0667,  6,   {  0, 10, 17, 21, 10,  0 },  "small omega",            -1 },
	{ 0670,  4,   {  0,  0,  0,  7,  5,  7 },  "small sub-0",            -1 },
	{ 0671,  3,   {  0,  0,  2,  3,  2,  2 },  "small sub-1",            -1 },
	{ 0672,  3,   {  0,  0,  3,  2,  1,  3 },  "small sub-2",            -1 },
	{ 0673,  3,   {  0,  0,  0,  3,  1,  3 },  "small sub-c",            -1 },
	{ 0674,  4,   {  0,  0,  6,  5,  3,  6 },  "small sub-e",            -1 },
	{ 0675,  4,   {  0,  0,  0,  0,  7,  5 },  "small sub-n",            -1 },
	{ 0676,  4,   {  0,  0,  0,  7,  7,  1 },  "small sub-p",            -1 },
	{ 0677,  4,   {  0,  0,  0,  0,  5,  7 },  "small sub-u",            -1 },
	{ 0700,  4,   {  3,  0,  7,  7,  5,  0 },  "small A-grave",          -1 },
	{ 0701,  4,   {  6,  0,  7,  7,  5,  0 },  "small A-acute",          -1 },
	{ 0702,  4,   {  7,  0,  7,  7,  5,  0 },  "small A-tilde",          -1 },
	{ 0703,  4,   {  5,  0,  7,  7,  5,  0 },  "small A-umlaut",         -1 },
	{ 0704,  4,   {  2,  0,  7,  7,  5,  0 },  "small A-dot",            -1 },
	{ 0705,  4,   {  6,  0,  7,  1,  7,  0 },  "small C-acute",          -1 },
	{ 0706,  4,   {  7,  0,  7,  1,  7,  0 },  "small C-hook",           -1 },
	{ 0707,  4,   {  6,  1,  1,  1,  6,  3 },  "small C-cedilla",        -1 },
	{ 0710,  4,   {  3,  0,  7,  3,  7,  0 },  "small E-grave",          -1 },
	{ 0711,  4,   {  6,  0,  7,  3,  7,  0 },  "small E-acute",          -1 },
	{ 0712,  4,   {  7,  0,  7,  3,  7,  0 },  "small E-filde",          -1 },
	{ 0713,  4,   {  5,  0,  7,  3,  7,  0 },  "small E-trema",          -1 },
	{ 0714,  3,   {  3,  0,  2,  2,  2,  0 },  "small I-grave",          -1 },
	{ 0715,  3,   {  3,  0,  1,  1,  1,  0 },  "small I-acute",          -1 },
	{ 0716,  4,   {  7,  0,  2,  2,  2,  0 },  "small I-tilde",          -1 },
	{ 0717,  4,   {  5,  0,  2,  2,  2,  0 },  "small I-trema",          -1 },
	{ 0720,  5,   { 15,  0, 11, 13,  9,  0 },  "small N-tilde",          -1 },
	{ 0721,  4,   {  3,  0,  7,  5,  7,  0 },  "small O-grave",          -1 },
	{ 0722,  4,   {  6,  0,  7,  5,  7,  0 },  "small O-acute",          -1 },
	{ 0723,  4,   {  7,  0,  7,  5,  7,  0 },  "small O-tilde",          -1 },
	{ 0724,  4,   {  5,  0,  7,  5,  7,  0 },  "small O-umlaut",         -1 },
	{ 0725,  4,   {  7,  0,  3,  3,  5,  0 },  "small R-hook",           -1 },
	{ 0726,  4,   {  7,  0,  6,  2,  3,  0 },  "small S-hook",           -1 },
	{ 0727,  4,   {  0,  0,  0,  7,  7,  5 },  "small sub-A",            -1 },
	{ 0730,  4,   {  3,  0,  5,  5,  7,  0 },  "small U-grave",          -1 },
	{ 0731,  4,   {  6,  0,  5,  5,  7,  0 },  "small U-acute",          -1 },
	{ 0732,  4,   {  7,  0,  5,  5,  7,  0 },  "small U-tilde",          -1 },
	{ 0733,  4,   {  5,  0,  5,  5,  7,  0 },  "small U-umlaut",         -1 },
	{ 0734,  4,   {  2,  0,  5,  5,  7,  0 },  "small U-dot",            -1 },
	{ 0735,  4,   {  6,  0,  5,  2,  2,  0 },  "small Y-acute",          -1 },
	{ 0736,  4,   {  5,  0,  5,  2,  2,  0 },  "small Y-trema",          -1 },
	{ 0737,  4,   {  7,  0,  3,  2,  6,  0 },  "small Z-hook",           -1 },
	{ 0740,  4,   {  3,  0,  6,  5,  6,  0 },  "small a-grave",          -1 },
	{ 0741,  4,   {  6,  0,  6,  5,  6,  0 },  "small a-acute",          -1 },
	{ 0742,  4,   {  7,  0,  6,  5,  6,  0 },  "small a-tilde",          -1 },
	{ 0743,  4,   {  5,  0,  6,  5,  6,  0 },  "small a-umlaut",         -1 },
	{ 0744,  4,   {  2,  0,  6,  5,  6,  0 },  "small a-dot",            -1 },
	{ 0745,  4,   {  6,  0,  7,  1,  6,  0 },  "small c-acute",          -1 },
	{ 0746,  4,   {  7,  0,  7,  1,  6,  0 },  "small c-hook",           -1 },
	{ 0747,  4,   {  0,  6,  1,  1,  6,  3 },  "small c-cedilla",        -1 },
	{ 0750,  4,   {  3,  0,  7,  3,  6,  0 },  "small e-grave",          -1 },
	{ 0751,  4,   {  6,  0,  7,  3,  6,  0 },  "small e-acute",          -1 },
	{ 0752,  4,   {  7,  0,  7,  3,  6,  0 },  "small e-tilde",          -1 },
	{ 0753,  4,   {  5,  0,  7,  3,  6,  0 },  "small e-trema",          -1 },
	{ 0754,  4,   {  3,  0,  2,  2,  6,  0 },  "small i-grave",          -1 },
	{ 0755,  3,   {  3,  0,  1,  1,  3,  0 },  "small i-acute",          -1 },
	{ 0756,  4,   {  7,  0,  2,  2,  6,  0 },  "small i-tilde",          -1 },
	{ 0757,  4,   {  5,  0,  2,  2,  6,  0 },  "small i-trema",          -1 },
	{ 0760,  4,   {  7,  0,  3,  5,  5,  0 },  "small n-tilde",          -1 },
	{ 0761,  4,   {  3,  0,  3,  5,  6,  0 },  "small o-grave",          -1 },
	{ 0762,  4,   {  6,  0,  3,  5,  6,  0 },  "small o-acute",          -1 },
	{ 0763,  4,   {  7,  0,  3,  5,  6,  0 },  "small o-tilde",          -1 },
	{ 0764,  4,   {  5,  0,  3,  5,  6,  0 },  "small o-umlaut",         -1 },
	{ 0765,  4,   {  7,  0,  6,  1,  1,  0 },  "small r-hook",           -1 },
	{ 0766,  4,   {  7,  0,  6,  2,  3,  0 },  "small s-hook",           -1 },
	{ 0767,  4,   {  0,  0,  0,  5,  3,  5 },  "small sub-k",            -1 },
	{ 0770,  4,   {  3,  0,  5,  5,  6,  0 },  "small u-grave",          -1 },
	{ 0771,  4,   {  6,  0,  5,  5,  6,  0 },  "small u-acute",          -1 },
	{ 0772,  4,   {  7,  0,  5,  5,  6,  0 },  "small u-tilde",          -1 },
	{ 0773,  4,   {  5,  0,  5,  5,  6,  0 },  "small u-umlaut",         -1 },
	{ 0774,  4,   {  2,  0,  5,  5,  6,  0 },  "small u-dot",            -1 },
	{ 0775,  4,   {  6,  0,  5,  7,  4,  3 },  "small y-acute",          -1 },
	{ 0776,  4,   {  5,  0,  5,  7,  4,  3 },  "small y-trema",          -1 },
	{ 0777,  4,   {  7,  0,  3,  2,  6,  0 },  "small z-hook",           -1 }
};


static void gen_pretty(FILE *f) {
	int i;

	license(f, "/* ", " * ", " */");

	fprintf(f, "/* Mappings from our internal character codes to readable strings.\n"
		" * The first table is for characters below space and the second for those\n"
		" * >=127 (del).\n"
		" */\n"
		"static const char *const map32[32] = {\n\t"
			);
	for (i=0; i<32; i++) {
		if (charset[i].name == NULL) fprintf(f, "NULL");
		else fprintf(f, "\"%s\"", charset[i].name);
		if ((i % 8) == 7) fprintf(f, ",\n\t");
		else fprintf(f, ", ");
	}
	fprintf(f, "};\n\nstatic const char *const maptop[129] = {\n\t");
	for (i=127; i<256; i++) {
		fprintf(f, "\"%s\"", charset[i].name);
		if ((i % 8) == 7) fprintf(f, ",\n\t");
		else fprintf(f, ", ");
	}
	fprintf(f, "};\n\n");
}

static int map_sort(const void *v1, const void *v2) {
	const int i1 = *(const int *)v1;
	const int i2 = *(const int *)v2;

	if (i1 < i2)	return -1;
	if (i1 > i2)	return 1;
	return 0;
}

static void gen_charmap(FILE *f) {
	int i, j, n;
	int idx[256];

	for (i=0; i<256; i++)
		idx[i] = charset[i].sortas;
	qsort(idx, 256, sizeof(int), &map_sort);

	for (i=n=0; i<256; i++)
		if (idx[i] != idx[n])
			idx[++n] = idx[i];

	license(f, "/* ", " * ", " */");
	fprintf(f, "/*\n"
			" * Using a 256 element table to define equivalence classes is smaller\n"
			" * than a switch statement to catch the exception.  Lower case is for\n"
			" * Greek letters and the Roman letter doesn't correspond at all with the Greek.\n"
			" */\n\n"
			"/* Maximum distinguished value is %d */\n\n\n"
			"static const unsigned char character_remapping_order[256] = {\n\t", n);
	for (i=0; i<256; i++) {
		for (j=0; j<=n; j++)
			if (idx[j] == charset[i].sortas)
				goto skip;
		j = -1;
skip:
		fprintf(f, "\t% 4d,", j);
		if ((i%8) == 7)
			fprintf(f, "\t// %04o\n\t", i-7);
	}
	fprintf(f, "};\n\n\n"
			"/* Take a character and remap it into sort order.\n"
			" * Also cater for different cases, diacriticals and some\n"
			" * special symbols being identical from an ordering perspective.\n"
			" */\n"
			"unsigned char remap_chars(unsigned char ch) {\n"
			"	return character_remapping_order[ch & 0xff];\n"
			"}\n");
}

static void emit_bitmap(FILE *f, int beg, int end, const char *name) {
	int i, n, row;
	unsigned char buffer[10000];

	for (n=0, i=beg; i<end; i++)
		n += charset[i].width - 1;
	fprintf(f,	"\tstatic const unsigned char %s[6][%d] = {\n", name, (n+7)/8);
	for (row=0; row<6; row++) {
		int l = 0;
		int base = 0;
		int b;

		fprintf(f,	"\t\t{\n\t\t\t");
		for (i=0; i<10000; i++)
			buffer[i] = 0;
		for (i=beg; i<end; i++)
			for (b=0; b<charset[i].width-1; b++, base++)
				if (charset[i].bitrows[row] & (1 << b))
					buffer[base / 8] |= (1 << (base % 8));
		for (i=0; i< (n+7)/8; i++) {
			fprintf(f,	"%3u,%s", buffer[i], (l++ % 12) == 11 ? "\n\t\t\t" : " ");
		}
		fprintf(f,	"\n\t\t},\n");
	}
	fprintf(f,	"\t};\n");
}

static void gen_charset(FILE *f) {
	int i;
	int n=0, l=0;

	license(f, "/* ", " * ", " */");

	fprintf(f,	"/* Function to return the length of a specific character in pixels\n"
			" */\n\n"
			"unsigned int charlengths(unsigned int c) {\n"
			"\tstatic const unsigned char widths[%d] = {\n\t\t", (512 + 2) / 3);
	for (i=0; i<512; i++) {
		const int w = charset[i].width - 1;
		if (w < 0 || w > 5) {
			fprintf(stderr, "Error with character %d: width is out of range%d\n", i, charset[i].width);
			exit(1);
		}
		switch (i%3) {
		case 0:	n = w;		break;
		case 1:	n += w*6;	break;
		case 2:
			n += w*36;
			fprintf(f, "%3d,%s", n, (l++ % 12) == 11 ? "\n\t\t" : " ");
		}
	}
	fprintf(f, 	"%3d\n\t};\n"
			"\tstatic const unsigned char divs[3] = { 1, 6, 36 };\n"
			"\treturn (widths[c/3] / divs[c%%3]) %% 6 + 1;\n"
			"}\n\n",
		n);

	fprintf(f,	"void findlengths(unsigned short int posns[257], int smallp) {\n"
			"\tconst int mask = smallp ? 256 : 0;\n"
			"\tint i;\n\n"
			"\tposns[0] = 0;\n"
			"\tfor(i=0; i<256; i++)\n"
			"\t\tposns[i+1] = posns[i] + charlengths(i + mask) - 1;\n"
			"}\n\n");

	fprintf(f,	"void unpackchar(unsigned int c, unsigned char d[6], int smallp, const unsigned short int posns[257]) {\n");
	emit_bitmap(f, 0, 256, "bm_large");
	emit_bitmap(f, 256, 512, "bm_small");
	fprintf(f,	"\tunsigned int n = posns[c&255];\n"
			"\tconst unsigned int fin = posns[(c&255)+1];\n"
			"\tunsigned int i, j;\n\n"
			"\tfor(i=0; i<6; i++) d[i] = 0;\n"
			"\tfor (i=0; n < fin; i++,n++) {\n"
			"\t\tfor (j=0; j<6; j++) {\n"
			"\t\t\tconst unsigned char z = smallp ? (bm_small[j][n>>3]) : (bm_large[j][n>>3]);\n"
			"\t\t\tif (z & (1 << (n&7)))\n"
			"\t\t\t\td[j] |= 1 << i;\n"
			"\t\t}\n"
			"\t}\n"
			"}\n\n");
}

static void gen_translate(FILE *f) {
	int i;
	static unsigned char t[256] = {0};

	license(f, "/* ", " * ", " */");

	fprintf(f,	"/* Tables to map to Unicode and Windows CP1252 (sort of)\n"
			" */\n\n"
			"const int unicode[256] = {\n");
	for (i=0; i<256; i++) {
		fprintf( f, "\t0x%04x,\t// %s\n", charset[i].unicode, charset[i].name );
	}
	fprintf(f,	"};\n\n"
			"const unsigned char to_cp1252[256] = {\n");
	for (i=0; i<256; i++) {
		int w = charset[i].windows;
		fprintf( f, "\t0x%02x,\t// %s\n", w, charset[i].name );
		if (t[w] != 0) {
			fprintf( f, "\t// Above is duplicate: %02x\n", t[w] );
		}
		t[w] = (unsigned char) i;
	}
	fprintf(f,	"};\n\n"
			"const unsigned char from_cp1252[256] = {\n");
	for (i=0; i<256; i++) {
		fprintf( f, "\t0x%02x,\t// %s\n", t[i], charset[t[i]].name );
	}
	fprintf(f,	"};\n\n"
			"const char *charnames[256] = {\n");
	for (i=0; i<256; i++) {
		fprintf( f, "\t\"%s\",\n", charset[i].uname ? charset[i].uname : charset[i].name );
	}
	fprintf(f,	"};\n\n");
}

static int sanity_check(void) {
	unsigned int i;
	int err = 0;

	for (i=0; i<512; i++)
		if (charset[i].octal != i) {
			fprintf(stderr, "character %04o is tagged in position %04o\n", i, charset[i].octal);
			err = 1;
		}
	return err;
}

int main(int argc, char *argv[]) {
	FILE * f_pretty = fopen("pretty.h", "w");
	FILE * f_charset = fopen("font.c", "w");
	FILE * f_charmap = fopen("charmap.c", "w");
	FILE * f_translate = fopen("translate.c", "w");

	gen_pretty(f_pretty);
	fclose(f_pretty);

	gen_charset(f_charset);
	fclose(f_charset);

	gen_charmap(f_charmap);
	fclose(f_charmap);

	gen_translate(f_translate);
	fclose(f_translate);

	return sanity_check();
}
